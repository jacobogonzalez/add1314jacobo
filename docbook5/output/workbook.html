<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ADD1314</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/></head><body><div xml:lang="es" class="book" title="ADD1314"><div class="titlepage"><div><div><h1 class="title"><a id="idm25209936"/>
ADD1314
   </h1></div><div><div class="author"><h3 class="author"><span class="firstname">Adrián y Jacobo</span></h3></div></div><div><div class="legalnotice" title="Aviso Legal"><a id="idp36960"/><p>Este docbook recoge los trabajos de la asignatura ADD1314.</p></div></div><div><p class="pubdate">19/11/2013</p></div></div><hr/></div><div class="toc"><p><strong>Tabla de contenidos</strong></p><dl><dt><span class="chapter"><a href="#idp38240">1. acceso remoto</a></span></dt><dd><dl><dt><span class="section"><a href="#idp84624">VNC</a></span></dt><dt><span class="section"><a href="#idp106464">Escritorio Remoto</a></span></dt><dt><span class="section"><a href="#idp119984">Terminal Server</a></span></dt><dt><span class="section"><a href="#idp129600">RemoteApp</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp136832">2. clientes ligeros</a></span></dt><dd><dl><dt><span class="section"><a href="#idp137760">Preparacion del servidor</a></span></dt><dt><span class="section"><a href="#idp141264">Instalacion</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp149376">3. SSH</a></span></dt><dd><dl><dt><span class="section"><a href="#idp150256">Servidor Windows</a></span></dt><dd><dl><dt><span class="section"><a href="#idp153632">Servidor (Windows 2008 Server):</a></span></dt><dt><span class="section"><a href="#idp165328">Cliente 1 (Xubuntu):</a></span></dt><dt><span class="section"><a href="#idp183600">Cliente 2 (Windows 7):</a></span></dt></dl></dd><dt><span class="section"><a href="#idp197296">Servidor Linux</a></span></dt><dd><dl><dt><span class="section"><a href="#idp200624">Instalación básica</a></span></dt><dt><span class="section"><a href="#idp207888">Personalización del prompt Bash</a></span></dt><dt><span class="section"><a href="#idp213248">Autenticación mediante claves públicas</a></span></dt><dt><span class="section"><a href="#idp218112">Uso de SSH como túnel para X</a></span></dt><dt><span class="section"><a href="#idp223744">Aplicaciones Windows nativas</a></span></dt><dt><span class="section"><a href="#idp234016">Restricciones de uso</a></span></dt></dl></dd></dl></dd></dl></div><div class="chapter" title="Capítulo 1. acceso remoto"><div class="titlepage"><div><div><h2 class="title"><a id="idp38240"/>Capítulo 1. acceso remoto</h2></div></div></div><div class="toc"><p><strong>Tabla de contenidos</strong></p><dl><dt><span class="section"><a href="#idp84624">VNC</a></span></dt><dt><span class="section"><a href="#idp106464">Escritorio Remoto</a></span></dt><dt><span class="section"><a href="#idp119984">Terminal Server</a></span></dt><dt><span class="section"><a href="#idp129600">RemoteApp</a></span></dt></dl></div><div class="section" title="VNC"><div class="titlepage"><div><div><h2 class="title"><a id="idp84624"/>VNC</h2></div></div></div><p>Lo primero que hicimos fue instalar el VNC para poder acceder a la máquina remota.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-01.png" width="405"/><p>Configuramos el servidor VNC.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-02.png" width="405"/><p>Finaliza la instalación.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-03.png" width="405"/><p>Abrimos el VNC en el servidor.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-04.png" width="405"/><p>Instalamos el VNC en el cliente.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-05.png" width="405"/><p>Conectamos el cliente con el servidor.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-06.png" width="405"/><p>Los dos Windows conectados con VNC.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-07.png" width="135"/><p>Windows y Debian conectados con VNC.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-08.png" width="135"/><p>Los dos Debian conectados con VNC.</p><p/><img src="../../picture/accesoremoto/accesoremoto-09.png" width="135"/><p>Debian y Windows conectados con VNC.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-10.png" width="135"/></div><div class="section" title="Escritorio Remoto"><div class="titlepage"><div><div><h2 class="title"><a id="idp106464"/>Escritorio Remoto</h2></div></div></div><p>Configurando el escritorio remoto de Linux.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-11.png" width="405"/><p>Debian y Debian conectados con Escritorio Remoto.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-12.png" width="135"/><p>Comando para arancar el vino server.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-13.png" width="216"/><p>Configurando escritorio remoto en Windows.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-14.png" width="405"/><p>Windows y Windows conectados con Escritorio Remoto.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-15.png" width="216"/><p>Debian y Windows conectados con Escritorio Remoto.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-16.png" width="216"/></div><div class="section" title="Terminal Server"><div class="titlepage"><div><div><h2 class="title"><a id="idp119984"/>Terminal Server</h2></div></div></div><p>Asistencia de instalación.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-17.png" width="270"/><p>Demostración de que está funcionando de manera correcta el Terminal Server.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-18.png" width="270"/><p>Probando una aplicación con el Terminal Server en Windows.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-19.png" width="162"/><p>Probando una aplicación con el Terminal Server en Debian.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-20.png" width="162"/></div><div class="section" title="RemoteApp"><div class="titlepage"><div><div><h2 class="title"><a id="idp129600"/>RemoteApp</h2></div></div></div><p>Instalación RemoteApp.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-21.png" width="270"/><p>Programas añadidos para RemoteApp.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-22.png" width="270"/><p>Iniciando el RemoteApp.</p><p/><img src="../../picture/t1/accesoremoto/accesoremoto-23.png" width="270"/></div></div><div class="chapter" title="Capítulo 2. clientes ligeros"><div class="titlepage"><div><div><h2 class="title"><a id="idp136832"/>Capítulo 2. clientes ligeros</h2></div></div></div><div class="toc"><p><strong>Tabla de contenidos</strong></p><dl><dt><span class="section"><a href="#idp137760">Preparacion del servidor</a></span></dt><dt><span class="section"><a href="#idp141264">Instalacion</a></span></dt></dl></div><div class="section" title="Preparacion del servidor"><div class="titlepage"><div><div><h2 class="title"><a id="idp137760"/>Preparacion del servidor</h2></div></div></div><p>El servidor tendra que tener dos interfaces de red</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Una externa para comunicarnos con internet, tenemos que tenerla en adpatador puente
    	</p></li><li class="listitem"><p>Una interna para conectarnos con los clientes, su ip sera estatica, en la misma red que los clientes y la pondremos como red interna
    	</p></li></ul></div></div><div class="section" title="Instalacion"><div class="titlepage"><div><div><h2 class="title"><a id="idp141264"/>Instalacion</h2></div></div></div><p>Lo primero que teníamos que hacer para realizar esta practica era instalar un sistema operativo Linux. Yo personalmente escogí uno llamado Easy peasy es una distribución basada en Ubuntu pero diseñada especialmente para los neetbook.</p><p/><img src="../../picture/t1/ltsp/easy.jpg" width="216"/><p/><p>Una vez hecho la instalación teníamos que instalar unos paquetes, para ellos lanzábamos estos comandos:
				</p><p><strong class="userinput"><code>sudo apt-get install ltsp-server-standalone
				</code></strong></p><p><strong class="userinput"><code>sudo ltsp-build-client</code></strong></p><p>Una vez realizado la instalación tendríamos que configurar la ip yo a mi maquina servidora le puse la 192.168.0.1   que es la que coge por defecto el servidor dhcp para no tener que estar configurándolo.
				</p><p>Una ves hecho todo esto y configurado dos interfaces de red una con la ip mencionada anterior mente y otra automática solo nos quedaba conectar el cliente.
						Y este es el resultado final.
				</p><p><a class="ulink" href="http://www.youtube.com/watch?v=wvTOQWQmWsw">ir al video de la comprobación</a>.
				</p></div></div><div class="chapter" title="Capítulo 3. SSH"><div class="titlepage"><div><div><h2 class="title"><a id="idp149376"/>Capítulo 3. SSH</h2></div></div></div><div class="toc"><p><strong>Tabla de contenidos</strong></p><dl><dt><span class="section"><a href="#idp150256">Servidor Windows</a></span></dt><dd><dl><dt><span class="section"><a href="#idp153632">Servidor (Windows 2008 Server):</a></span></dt><dt><span class="section"><a href="#idp165328">Cliente 1 (Xubuntu):</a></span></dt><dt><span class="section"><a href="#idp183600">Cliente 2 (Windows 7):</a></span></dt></dl></dd><dt><span class="section"><a href="#idp197296">Servidor Linux</a></span></dt><dd><dl><dt><span class="section"><a href="#idp200624">Instalación básica</a></span></dt><dt><span class="section"><a href="#idp207888">Personalización del prompt Bash</a></span></dt><dt><span class="section"><a href="#idp213248">Autenticación mediante claves públicas</a></span></dt><dt><span class="section"><a href="#idp218112">Uso de SSH como túnel para X</a></span></dt><dt><span class="section"><a href="#idp223744">Aplicaciones Windows nativas</a></span></dt><dt><span class="section"><a href="#idp234016">Restricciones de uso</a></span></dt></dl></dd></dl></div><div class="section" title="Servidor Windows"><div class="titlepage"><div><div><h2 class="title"><a id="idp150256"/>Servidor Windows</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Servidor: Windows 2008 Server.</p></li><li class="listitem"><p>Cliente 1: Xubuntu.</p></li><li class="listitem"><p>Cliente 2: Windows 7.</p></li></ul></div><div class="section" title="Servidor (Windows 2008 Server):"><div class="titlepage"><div><div><h3 class="title"><a id="idp153632"/>Servidor (Windows 2008 Server):</h3></div></div></div><p>IP's del servidor Windows 2008 Server:</p><p/><img src="../../picture/t1/ssh/adrian/serv/1_IP.png" width="405"/><p>Añadimos en C:\Windows\System32\drivers\etc\hosts el equipo ssh-client1 y ssh-client2:</p><p/><img src="../../picture/t1/ssh/adrian/serv/2_hosts.png" width="405"/><p>Probamos hacer ping al cliente 1:</p><p/><img src="../../picture/t1/ssh/adrian/serv/3_ping a clie1.png" width="270"/><p>Probamos hacer ping al cliente 2:</p><p/><img src="../../picture/t1/ssh/adrian/serv/4_ping a clie2.png" width="270"/><p>Comprobamos que ambos clientes están conectados al servidor mediante SSH:</p><p/><img src="../../picture/t1/ssh/adrian/serv/5_2 clie conectados.png" width="405"/></div><div class="section" title="Cliente 1 (Xubuntu):"><div class="titlepage"><div><div><h3 class="title"><a id="idp165328"/>Cliente 1 (Xubuntu):</h3></div></div></div><p>IP's del cliente1 Xubuntu:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/1_IP.png" width="405"/><p>Añadimos en /etc/hosts el equipo ssh-server y ssh-client2:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/2_hosts.png" width="270"/><p>Probamos hacer ping al servidor:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/3_ping a serv.png" width="270"/><p>Probamos hacer ping al cliente 2:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/4_ping a clie2.png" width="270"/><p>Probamos conectarnos al servidor mediante SSH:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/5_clie1 a serv.png" width="270"/><p>Conectados de manera correcta al servidor Windows 2008 Server:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/6_clie1 a serv.png" width="270"/><p>Capturar la clave intercambiada en el primer proceso de conexión SSH:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/7_captura clave clie linux a serv.png" width="270"/><p>Probamos hacer los demás pasos llegados a este etapa como por ejemplo el del punto 5 (Uso de SSH como túnel para X), pero nos da error ya que no se pueden realizar con un servidor windows:</p><p/><img src="../../picture/t1/ssh/adrian/clie1/8_paso 5 error.png" width="270"/></div><div class="section" title="Cliente 2 (Windows 7):"><div class="titlepage"><div><div><h3 class="title"><a id="idp183600"/>Cliente 2 (Windows 7):</h3></div></div></div><p>IP's del cliente2 Windows 7:</p><p/><img src="../../picture/t1/ssh/adrian/clie2/1_IP.png" width="405"/><p>Añadimos en /etc/hosts el equipo ssh-server y ssh-client1:</p><p/><img src="../../picture/t1/ssh/adrian/clie2/2_hosts.png" width="405"/><p>Probamos hacer ping al servidor:</p><p/><img src="../../picture/t1/ssh/adrian/clie2/3_ping a serv.png" width="324"/><p>Probamos hacer ping al cliente 1:</p><p/><img src="../../picture/t1/ssh/adrian/clie2/4_ping a clie1.png" width="324"/><p>Probamos conectarnos al servidor mediante SSH:</p><p/><img src="../../picture/t1/ssh/adrian/clie2/5_clie2 a serv.png" width="270"/><p>Conectados de manera correcta al servidor Windows 2008 Server:</p><p/><img src="../../picture/t1/ssh/adrian/clie2/6_clie2 a serv.png" width="270"/></div></div><div class="section" title="Servidor Linux"><div class="titlepage"><div><div><h2 class="title"><a id="idp197296"/>Servidor Linux</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Servidor: Xubuntu.</p></li><li class="listitem"><p>Cliente 1: Xubuntu.</p></li><li class="listitem"><p>Cliente 2: Windows XP.</p></li></ul></div><div class="section" title="Instalación básica"><div class="titlepage"><div><div><h3 class="title"><a id="idp200624"/>Instalación básica</h3></div></div></div><p>Configurar el servidor ssh:</p><p/><img src="../../picture/t1/ssh/jacobo/serv/host-ssh-server.png" width="324"/><p>Configurar el cliente1 (Xubuntu) ssh:</p><p/><img src="../../picture/t1/ssh/jacobo/clie1/host-ssh-client.png" width="324"/><p>En Windows lo único que tenemos que hacer para configurar el ssh es instslar la aplicación putty.</p><p/><img src="../../picture/t1/ssh/jacobo/clie2/Captura de pantalla de 2013-10-29 10:00:39.png" width="324"/></div><div class="section" title="Personalización del prompt Bash"><div class="titlepage"><div><div><h3 class="title"><a id="idp207888"/>Personalización del prompt Bash</h3></div></div></div><p>Para configurar el prompt bash tenemos que dirigirnos al servidor ssh y escribir la siguiente línea de comandos:</p><p/><img src="../../picture/t1/ssh/jacobo/serv/colorbash.png" width="324"/><p>Ahora nos vamos al cliente Xubuntu y nos conectamos mediante ssh al servidor y vemos que el prompt ha cambiado el color a rojo:</p><p/><img src="../../picture/t1/ssh/jacobo/clie1/concecioncliete1.png" width="324"/></div><div class="section" title="Autenticación mediante claves públicas"><div class="titlepage"><div><div><h3 class="title"><a id="idp213248"/>Autenticación mediante claves públicas</h3></div></div></div><p/><img src="../../picture/t1/ssh/jacobo/serv/capturadekeygen.png" width="324"/><p>Modificamos distintos archivos del servidor para que nuestros clientes sean autentificados por claves públicas y no nos pida una contraseña a la hora de conectarnos:</p><p/><img src="../../picture/t1/ssh/jacobo/clie1/clavespublicas.png" width="324"/></div><div class="section" title="Uso de SSH como túnel para X"><div class="titlepage"><div><div><h3 class="title"><a id="idp218112"/>Uso de SSH como túnel para X</h3></div></div></div><p>Añadimos una línea más al archivo de configuración ssh-config como se ve en la siguiente imagen:</p><p/><img src="../../picture/t1/ssh/jacobo/clie1/aplicacionserver-clientconfig.png" width="324"/><p>Probamos una apliación que está instalada en el servidor pero no en el cliente, para ello nos conectamos mediante ssh al servidor y escribimos el siguiente comando ssh -X remoteuser1@ssh-server; geany:</p><p/><img src="../../picture/t1/ssh/jacobo/clie1/aplicacionssh.png" width="216"/></div><div class="section" title="Aplicaciones Windows nativas"><div class="titlepage"><div><div><h3 class="title"><a id="idp223744"/>Aplicaciones Windows nativas</h3></div></div></div><p>Nos conectamos con el cliente linux al servidor y ejecutamos el notepad:</p><p/><p>Para poder ejecutar aplicaciones de windows nativas debemos instalar el wine:</p><p/><img src="../../picture/t1/ssh/jacobo/serv/wine.png" width="216"/><p>Para poder ejecutar aplicaciones de windows nativas desde un cliente windows tenemos que instslar el programa xming:</p><p/><img src="../../picture/t1/ssh/jacobo/clie2/programacorreraplicacionenwindows.png" width="405"/><p>Una vez instalado el programa anterior configuramos el putty como se ve en la siguient imagen:</p><p/><img src="../../picture/t1/ssh/jacobo/clie2/configurarputtiparaaplicaciones.png" width="405"/><p>Aquí vemos funcionando el notepad por ssh:</p><p/><img src="../../picture/t1/ssh/jacobo/clie2/notepadwindows.png" width="324"/></div><div class="section" title="Restricciones de uso"><div class="titlepage"><div><div><h3 class="title"><a id="idp234016"/>Restricciones de uso</h3></div></div></div><p>La restrcción de tipo 1 no hay que hacer nada.</p><p/><p>Para aplicar al restricción tipo 2, tenemos que dirigirnos al archivo /etc/sshd_config al final añadimos la línea DenyUsers remoteuser2 y queda aplicar la restriccón para que dicho usuario no pueda conectarse por ssh:</p><p/><img src="../../picture/t1/ssh/jacobo/clie1/restriccion total 2.png" width="459"/><p>Para aplicar al restricción tipo 3, tenemos que modificar el sguiente script:</p><p/><img src="../../picture/t1/ssh/jacobo/script/script.png" width="216"/><p>Lo ejecutamos pero nos dará error, ya que tenemos que usar una de las variables que se nos indica (--lock):</p><p/><img src="../../picture/t1/ssh/jacobo/script/ejecutarscript.png" width="432"/><p>Los escribiremos de manera correcta "./limit.ssh.users.rb --lock":</p><p/><img src="../../picture/t1/ssh/jacobo/script/ejecutarscript.png" width="432"/><p>Y lo ejecutaremos:</p><p/><img src="../../picture/t1/ssh/jacobo/script/script3.png" width="405"/></div></div></div></div></body></html>
